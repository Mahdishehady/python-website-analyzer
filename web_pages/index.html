<html>
<head>
    <title>Highcharts Histogram</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
</head>
<body>
<div id="container"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        let news = [];
        const apiUrl = 'http://127.0.0.1:8000/getLastNews';

// Make a GET request to the API
        fetch(apiUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json(); // Parse the response as JSON
            })
            .then(data => {
                const values = Object.values(data)
                const keys = Object.keys(data)

                for (const key in data) {
                    const temp = [];
                    temp.push(key);
                    temp.push(data[key])
                    news.push(temp)
                }
                console.log(news)
                 Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Aljazeera largest News Last 10 days'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                type: 'category',
                labels: {
                    autoRotation: [-45, -90],
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'News'
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                pointFormat: 'News'
            },
            series: [{
                name: 'News',
                colors: [
                    '#9b20d9', '#9215ac', '#861ec9', '#7a17e6', '#7010f9', '#691af3',
                    '#6225ed', '#5b30e7', '#533be1', '#4c46db', '#4551d5', '#3e5ccf',
                    '#3667c9', '#2f72c3', '#277dbd', '#1f88b7', '#1693b1', '#0a9eaa',
                    '#03c69b', '#00f194'
                ],
                colorByPoint: true,
                groupPadding: 0,
                data: news ,
                dataLabels: {
                    enabled: true,
                    rotation: -90,
                    color: '#FFFFFF',
                    align: 'right',
                    format: '{point.y:.0f}', // one decimal
                    y: 10, // 10 pixels down from the top
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            }]
        });



            })
            .catch(error => {
                console.error('Fetch error:', error);
            });



    });
</script>
</body>
</html>